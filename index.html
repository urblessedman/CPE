<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1e3a8a">
    <title>ìƒë¡ AI ì„¸ì¼ì¦ˆ ë§ˆìŠ¤í„°</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
            /* gray-100 */
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
            /* Prevent pull-to-refresh */
        }

        /* App Shell Layout */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            /* Fallback */
            height: 100dvh;
            /* Dynamic Viewport Height */
            max-width: 480px;
            margin: 0 auto;
            background-color: white;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .scroll-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 80px;
            /* Space for bottom nav */
        }

        /* Hide Scrollbar */
        .scroll-content::-webkit-scrollbar {
            display: none;
        }

        .scroll-content {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Animations */
        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .animate-slide-up {
            animation: slideUp 0.3s ease-out forwards;
        }

        /* Bottom Nav Active State */
        .nav-item.active {
            color: #1e3a8a;
        }

        .nav-item.active i {
            transform: translateY(-2px);
        }

        .nav-item.active span {
            font-weight: 700;
        }

        .nav-item {
            color: #9ca3af;
            transition: all 0.2s;
        }

        /* Safe Area for iPhone X+ */
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>

<body class="bg-gray-200">

    <div class="app-container">

        <header
            class="bg-blue-900 text-white pt-10 pb-6 px-6 rounded-b-[2rem] shadow-lg z-20 relative overflow-hidden flex-shrink-0">
            <div class="absolute top-0 right-0 opacity-10 transform translate-x-6 -translate-y-2 pointer-events-none">
                <i class="fas fa-leaf text-9xl"></i>
            </div>
            <div class="relative z-10 flex justify-between items-end">
                <div>
                    <div class="text-blue-300 text-[10px] font-bold tracking-widest uppercase mb-1">Shinhan Life Sangrok
                    </div>
                    <h1 class="text-2xl font-black leading-none">ìƒë¡ AI<br>ì„¸ì¼ì¦ˆ ë§ˆìŠ¤í„°</h1>
                </div>
                <button onclick="toggleInstallGuide()"
                    class="bg-blue-800 p-2 rounded-full hover:bg-blue-700 transition shadow-inner">
                    <i class="fas fa-download text-sm"></i>
                </button>
            </div>
        </header>

        <main id="main-view" class="scroll-content px-5 pt-6">

            <div id="view-home" class="animate-slide-up">
                <div
                    class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-5 text-white shadow-lg mb-6 relative overflow-hidden">
                    <div class="relative z-10">
                        <p class="text-xs text-blue-100 mb-1">ì˜¤ëŠ˜ì˜ ìƒë¡ êµ¬í˜¸</p>
                        <p class="font-bold text-lg">"ê¿ˆì„ í˜„ì‹¤ë¡œ! ìƒê°ì„ í˜„ì‹¤ë¡œ!"</p>
                        <p class="text-xs text-blue-200 mt-2 text-right">- ìƒë¡ì§€ì ì¥ -</p>
                    </div>
                    <i class="fas fa-quote-right absolute bottom-2 right-4 text-6xl text-white opacity-10"></i>
                </div>

                <div class="grid grid-cols-2 gap-4 pb-6">
                    <button onclick="switchTab('rp')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3 text-blue-600 text-xl">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <span class="font-bold text-gray-800">RP ì—°ìŠµ</span>
                        <span class="text-xs text-gray-500 mt-1">ëœë¤ ê³ ê° ìƒì„±</span>
                    </button>
                    <button onclick="switchTab('obj')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center mb-3 text-indigo-600 text-xl">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <span class="font-bold text-gray-800">ê±°ì ˆ ì²˜ë¦¬</span>
                        <span class="text-xs text-gray-500 mt-1">í•„ìŠ¹ í™”ë²•</span>
                    </button>
                    <button onclick="switchTab('msg')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3 text-green-600 text-xl">
                            <i class="fas fa-envelope-open-text"></i>
                        </div>
                        <span class="font-bold text-gray-800">AI ì•ˆë¶€ë¹„ì„œ</span>
                        <span class="text-xs text-gray-500 mt-1">ë§ì¶¤ ë©”ì‹œì§€</span>
                    </button>
                    <button onclick="switchTab('dic')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-3 text-purple-600 text-xl">
                            <i class="fas fa-book"></i>
                        </div>
                        <span class="font-bold text-gray-800">3ì´ˆ ìš©ì–´</span>
                        <span class="text-xs text-gray-500 mt-1">ì‰¬ìš´ ì„¤ëª…</span>
                    </button>

                    <button onclick="switchTab('persona')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-rose-100 flex items-center justify-center mb-3 text-rose-600 text-xl">
                            <i class="fas fa-search-dollar"></i>
                        </div>
                        <span class="font-bold text-gray-800">ê³ ê° ë¶„ì„</span>
                        <span class="text-xs text-gray-500 mt-1">ì„±í–¥ & ê³µëµë²•</span>
                    </button>
                    <button onclick="switchTab('compliment')"
                        class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center hover:shadow-md transition">
                        <div
                            class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center mb-3 text-amber-600 text-xl">
                            <i class="fas fa-gift"></i>
                        </div>
                        <span class="font-bold text-gray-800">ì¹­ì°¬ ì œì¡°ê¸°</span>
                        <span class="text-xs text-gray-500 mt-1">ìŠ¤ëª°í† í¬ ì¹˜íŠ¸í‚¤</span>
                    </button>
                </div>
            </div>

            <div id="view-rp" class="hidden animate-slide-up space-y-4">
                <h2 class="text-xl font-bold text-gray-800">ğŸ­ RP ì‹œë‚˜ë¦¬ì˜¤</h2>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <p class="text-sm text-gray-600 mb-4">"ì˜¤ëŠ˜ì€ ì–´ë–¤ ê³ ê°ì„ ë§Œë‚ ê¹Œìš”?"<br>AIê°€ ê°€ìƒ ê³ ê°ì„ ë§¤ì¹­í•´ë“œë¦½ë‹ˆë‹¤.</p>
                    <button onclick="generateRPScenario()" id="btn-rp"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2">
                        <span>ğŸ² ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±</span>
                    </button>
                </div>
                <div id="result-rp"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-blue-500 relative">
                    <div id="rp-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('rp-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-blue-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

            <div id="view-obj" class="hidden animate-slide-up space-y-4">
                <h2 class="text-xl font-bold text-gray-800">ğŸ›¡ï¸ ê±°ì ˆ ê·¹ë³µ</h2>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <textarea id="input-objection" rows="3" placeholder="ê³ ê°ì˜ ê±°ì ˆ ë©˜íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none mb-3"></textarea>
                    <button onclick="generateScript()" id="btn-obj"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2">
                        <span>âœ¨ ì†”ë£¨ì…˜ ë°›ê¸°</span>
                    </button>
                </div>
                <div id="result-script"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-indigo-500 relative">
                    <div id="script-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('script-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-indigo-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

            <div id="view-msg" class="hidden animate-slide-up space-y-4">
                <h2 class="text-xl font-bold text-gray-800">ğŸ’Œ AI ì•ˆë¶€ ë¹„ì„œ</h2>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 space-y-3">
                    <select id="msg-target"
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="ê¸°ì¡´ ê³„ì•½ ê³ ê°">ê¸°ì¡´ ê³„ì•½ ê³ ê°</option>
                        <option value="ê°€ë§ ê³ ê° (ì§€ì¸)">ê°€ë§ ê³ ê° (ì§€ì¸)</option>
                        <option value="ì†Œê°œë°›ì€ ë¶„">ì†Œê°œë°›ì€ ë¶„ (ì²«ì¸ì‚¬)</option>
                    </select>
                    <input type="text" id="msg-purpose" placeholder="ëª©ì  (ì˜ˆ: ìƒì¼, í™˜ì ˆê¸° ì•ˆë¶€)"
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500">
                    <button onclick="generateMessage()" id="btn-msg"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2 mt-2">
                        <span>ğŸ’Œ ë©”ì‹œì§€ ì‘ì„±</span>
                    </button>
                </div>
                <div id="result-msg"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-green-500 relative">
                    <div id="msg-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('msg-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-green-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

            <div id="view-dic" class="hidden animate-slide-up space-y-4">
                <h2 class="text-xl font-bold text-gray-800">ğŸ“˜ 3ì´ˆ ìš©ì–´</h2>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <input type="text" id="input-term" placeholder="ì–´ë ¤ìš´ ìš©ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 mb-3">
                    <button onclick="generateTermExplanation()" id="btn-dic"
                        class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2">
                        <span>ğŸ” ì‰½ê²Œ ì„¤ëª…í•˜ê¸°</span>
                    </button>
                </div>
                <div id="result-dic"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-purple-500 relative">
                    <div id="dic-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('dic-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-purple-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

            <div id="view-persona" class="hidden animate-slide-up space-y-4">
                <div class="flex items-center gap-2">
                    <button onclick="switchTab('home')" class="text-gray-400 hover:text-gray-800"><i
                            class="fas fa-arrow-left"></i></button>
                    <h2 class="text-xl font-bold text-gray-800">ğŸ•µï¸â€â™‚ï¸ AI ê³ ê° ë¶„ì„</h2>
                </div>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 space-y-3">
                    <div class="flex gap-2">
                        <select id="p-age"
                            class="w-1/2 p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500">
                            <option value="20ëŒ€ ì‚¬íšŒì´ˆë…„ìƒ">20ëŒ€ ì‚¬íšŒì´ˆë…„ìƒ</option>
                            <option value="30ëŒ€ ì‹ í˜¼ë¶€ë¶€">30ëŒ€ ì‹ í˜¼ë¶€ë¶€</option>
                            <option value="40ëŒ€ ê°€ì¥">40ëŒ€ ê°€ì¥</option>
                            <option value="50ëŒ€ ì€í‡´ì¤€ë¹„">50ëŒ€ ì€í‡´ì¤€ë¹„</option>
                            <option value="60ëŒ€ ì´ìƒ">60ëŒ€ ì´ìƒ</option>
                        </select>
                        <select id="p-gender"
                            class="w-1/2 p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500">
                            <option value="ë‚¨ì„±">ë‚¨ì„±</option>
                            <option value="ì—¬ì„±">ì—¬ì„±</option>
                        </select>
                    </div>
                    <input type="text" id="p-job" placeholder="ì§ì—… (ì˜ˆ: ìì˜ì—…ì, ê³µë¬´ì›)"
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500">
                    <input type="text" id="p-interest" placeholder="íŠ¹ì´ì‚¬í•­ (ì˜ˆ: ë‚šì‹œ ì¢‹ì•„í•¨, ìµœê·¼ ë“ë‚¨)"
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500">

                    <button onclick="analyzePersona()" id="btn-persona"
                        class="w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2 mt-2">
                        <span>âœ¨ ê³µëµ ë¦¬í¬íŠ¸ ë¶„ì„</span>
                    </button>
                </div>
                <div id="result-persona"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-rose-500 relative">
                    <div id="persona-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('persona-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-rose-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

            <div id="view-compliment" class="hidden animate-slide-up space-y-4">
                <div class="flex items-center gap-2">
                    <button onclick="switchTab('home')" class="text-gray-400 hover:text-gray-800"><i
                            class="fas fa-arrow-left"></i></button>
                    <h2 class="text-xl font-bold text-gray-800">ğŸ ì¹­ì°¬ ì œì¡°ê¸°</h2>
                </div>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <p class="text-sm text-gray-600 mb-2">ì¹­ì°¬í•  ê±°ë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë„¥íƒ€ì´ê°€ ë©‹ì§, ìë…€ ëŒ€í•™ í•©ê²©)</p>
                    <input type="text" id="input-compliment" placeholder="ì¹­ì°¬ ì†Œì¬ ì…ë ¥..."
                        class="w-full p-3 text-sm bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 mb-3">
                    <button onclick="generateCompliment()" id="btn-compliment"
                        class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition flex justify-center items-center gap-2">
                        <span>âœ¨ ì¹­ì°¬ ë©˜íŠ¸ ìƒì„±</span>
                    </button>
                </div>
                <div id="result-compliment"
                    class="hidden bg-white p-5 rounded-2xl shadow-sm border-l-4 border-amber-500 relative">
                    <div id="compliment-text" class="text-sm text-gray-800 whitespace-pre-line leading-relaxed"></div>
                    <button onclick="copyToClipboard('compliment-text')"
                        class="absolute top-4 right-4 text-gray-400 hover:text-amber-600"><i
                            class="far fa-copy"></i></button>
                </div>
            </div>

        </main>

        <nav
            class="bg-white border-t border-gray-200 flex justify-around items-center h-20 pb-safe fixed bottom-0 w-full max-w-[480px] z-30 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
            <button onclick="switchTab('home')" id="nav-home"
                class="nav-item active flex flex-col items-center justify-center w-full h-full pb-2">
                <i class="fas fa-home text-lg mb-1"></i>
                <span class="text-[10px]">í™ˆ</span>
            </button>
            <button onclick="switchTab('rp')" id="nav-rp"
                class="nav-item flex flex-col items-center justify-center w-full h-full pb-2">
                <i class="fas fa-user-friends text-lg mb-1"></i>
                <span class="text-[10px]">RP</span>
            </button>
            <button onclick="switchTab('obj')" id="nav-obj"
                class="nav-item flex flex-col items-center justify-center w-full h-full pb-2">
                <i class="fas fa-shield-alt text-lg mb-1"></i>
                <span class="text-[10px]">ê±°ì ˆ</span>
            </button>
            <button onclick="switchTab('msg')" id="nav-msg"
                class="nav-item flex flex-col items-center justify-center w-full h-full pb-2">
                <i class="fas fa-envelope text-lg mb-1"></i>
                <span class="text-[10px]">ë¹„ì„œ</span>
            </button>
            <button onclick="switchTab('dic')" id="nav-dic"
                class="nav-item flex flex-col items-center justify-center w-full h-full pb-2">
                <i class="fas fa-book text-lg mb-1"></i>
                <span class="text-[10px]">ìš©ì–´</span>
            </button>
        </nav>

        <div id="install-guide" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden flex flex-col justify-end">
            <div class="bg-white rounded-t-3xl p-6 animate-slide-up pb-10">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-gray-900">ğŸ“² ì•± ì„¤ì¹˜ ë°©ë²•</h3>
                    <button onclick="toggleInstallGuide()" class="text-gray-400 hover:text-gray-600"><i
                            class="fas fa-times text-xl"></i></button>
                </div>

                <div class="space-y-4">
                    <div class="bg-gray-50 p-3 rounded-xl flex items-center">
                        <i class="fab fa-apple text-2xl text-gray-800 mr-4 ml-2"></i>
                        <div class="text-sm text-gray-700">
                            <strong>ì•„ì´í°(Safari)</strong><br>
                            í•˜ë‹¨ ê³µìœ  ë²„íŠ¼ <i class="fas fa-share-square text-blue-500"></i> â†’ 'í™ˆ í™”ë©´ì— ì¶”ê°€' ì„ íƒ
                        </div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-xl flex items-center">
                        <i class="fab fa-android text-2xl text-green-600 mr-4 ml-2"></i>
                        <div class="text-sm text-gray-700">
                            <strong>ê°¤ëŸ­ì‹œ(Chrome/Internet)</strong><br>
                            ë©”ë‰´ ë²„íŠ¼ <i class="fas fa-ellipsis-v text-gray-500"></i> â†’ 'í™ˆ í™”ë©´ì— ì¶”ê°€/ì•± ì„¤ì¹˜' ì„ íƒ
                        </div>
                    </div>
                </div>

                <button onclick="toggleInstallGuide()"
                    class="w-full bg-blue-900 text-white font-bold py-3 rounded-xl mt-6">
                    í™•ì¸í–ˆìŠµë‹ˆë‹¤
                </button>
            </div>
        </div>

        <div id="toast"
            class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg opacity-0 transition-opacity duration-300 pointer-events-none z-50 text-sm font-bold">
            <i class="fas fa-check mr-2 text-green-400"></i> ë³µì‚¬ì™„ë£Œ!
        </div>

    </div>

    <script>
        // API Key
        const apiKey = "AIzaSyB3oJRe_X85AjnTaxim9k1-yNxPb4WCMok";

        // --- Navigation Logic ---
        function switchTab(viewId) {
            // 1. Hide all views
            const views = ['home', 'rp', 'obj', 'msg', 'dic', 'persona', 'compliment'];
            views.forEach(v => {
                document.getElementById(`view-${v}`).classList.add('hidden');
                // Only update nav items that exist (bottom bar only has 5)
                const navItem = document.getElementById(`nav-${v}`);
                if (navItem) navItem.classList.remove('active');
            });

            // 2. Show selected view
            document.getElementById(`view-${viewId}`).classList.remove('hidden');

            // 3. Highlight nav if it exists
            const activeNav = document.getElementById(`nav-${viewId}`);
            if (activeNav) activeNav.classList.add('active');

            // 4. Re-trigger animation
            const el = document.getElementById(`view-${viewId}`);
            el.classList.remove('animate-slide-up');
            void el.offsetWidth; // trigger reflow
            el.classList.add('animate-slide-up');
        }

        // --- Install Guide Logic ---
        function toggleInstallGuide() {
            const guide = document.getElementById('install-guide');
            if (guide.classList.contains('hidden')) {
                guide.classList.remove('hidden');
            } else {
                guide.classList.add('hidden');
                // Save to local storage to show only once (Optional, kept simple for now)
            }
        }

        // --- Copy Logic ---
        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).innerText;
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const toast = document.getElementById('toast');
            toast.classList.remove('opacity-0');
            setTimeout(() => toast.classList.add('opacity-0'), 1500);
        }

        // --- Gemini API Logic ---
        async function callGemini(prompt, resultId, textId, btnId) {
            const container = document.getElementById(resultId);
            const textEl = document.getElementById(textId);
            const btn = document.getElementById(btnId);
            const originalBtnHtml = btn.innerHTML;

            // Loading UI
            btn.disabled = true;
            btn.innerHTML = '<div class="loader"></div>';
            btn.classList.add('opacity-75');
            textEl.innerHTML = '';
            container.classList.add('hidden');

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: {
                            parts: [{
                                text: `ë‹¹ì‹ ì€ 'ì‹ í•œë¼ì´í”„ ìƒë¡ì§€ì ì¥'ì…ë‹ˆë‹¤. 
                                25ë…„ì°¨ ë³´í—˜ ë² í…Œë‘ìœ¼ë¡œì„œ ì‹ ì… FCì—ê²Œ ì‹¤ì „ íŒì„ ì œê³µí•©ë‹ˆë‹¤.
                                ë§íˆ¬: ìì‹ ê° ë„˜ì¹˜ê³  ë”°ëœ»í•˜ê²Œ("~í•©ë‹ˆë‹¤", "~í•˜ì„¸ìš”"). 
                                ì´ëª¨ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.
                                í•µì‹¬ê°€ì¹˜: 'ë³´í—˜ì€ ê°€ì¡± ì‚¬ë‘', 'ê±°ì ˆì€ ë‹¹ì—°í•˜ë‹¤', 'ê¾¸ì¤€í•¨ì´ ë‹µì´ë‹¤'.`
                            }]
                        }
                    })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                const text = data.candidates[0].content.parts[0].text;

                container.classList.remove('hidden');
                textEl.innerHTML = text.replace(/\n/g, '<br>');

            } catch (error) {
                alert("AI ì—°ê²° ì‹¤íŒ¨: " + error.message);
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnHtml;
                btn.classList.remove('opacity-75');
            }
        }

        // --- Feature Triggers ---
        function generateRPScenario() {
            const prompt = "ì‹ ì… FCë¥¼ ìœ„í•œ ëœë¤ ì„¸ì¼ì¦ˆ RP ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë§Œë“¤ì–´ì¤˜. 1.ê³ ê° í”„ë¡œí•„ 2.ì¬ë¬´ë‹ˆì¦ˆ 3.í•µì‹¬ê±°ì ˆ 4.ê³µëµíŒ í¬í•¨.";
            callGemini(prompt, 'result-rp', 'rp-text', 'btn-rp');
        }

        function generateScript() {
            const val = document.getElementById('input-objection').value;
            if (!val.trim()) return alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");
            const prompt = `ê³ ê° ê±°ì ˆ: "${val}"\nì´ì— ëŒ€í•œ ìƒë¡ì§€ì ë§Œì˜ 3ë‹¨ê³„ ì‘ëŒ€ í™”ë²•(ê³µê°-ì§ˆë¬¸-ì œì•ˆ)ì„ êµ¬ì–´ì²´ë¡œ ì‘ì„±í•´ì¤˜.`;
            callGemini(prompt, 'result-script', 'script-text', 'btn-obj');
        }

        function generateMessage() {
            const target = document.getElementById('msg-target').value;
            const purpose = document.getElementById('msg-purpose').value;
            if (!purpose.trim()) return alert("ëª©ì ì„ ì…ë ¥í•˜ì„¸ìš”");
            const prompt = `ìˆ˜ì‹ : ${target}, ëª©ì : ${purpose}\nìƒí™©ì— ë§ëŠ” ì•ˆë¶€ ë¬¸ì ë©”ì‹œì§€ 3ê°€ì§€ ë²„ì „(ê²©ì‹, ì¹œê·¼, ì„íŒ©íŠ¸)ì„ ì‘ì„±í•´ì¤˜.`;
            callGemini(prompt, 'result-msg', 'msg-text', 'btn-msg');
        }

        function generateTermExplanation() {
            const term = document.getElementById('input-term').value;
            if (!term.trim()) return alert("ìš©ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
            const prompt = `ë³´í—˜ ìš©ì–´ "${term}"ì„ ì´ˆë“±í•™ìƒë„ ì´í•´í•˜ê²Œ ì‰¬ìš´ ë¹„ìœ ë¥¼ ë“¤ì–´ ì„¤ëª…í•˜ê³ , ìƒë‹´ ì‹œ í™œìš©í•  ë©˜íŠ¸ë¥¼ ì‘ì„±í•´ì¤˜.`;
            callGemini(prompt, 'result-dic', 'dic-text', 'btn-dic');
        }

        function analyzePersona() {
            const age = document.getElementById('p-age').value;
            const gender = document.getElementById('p-gender').value;
            const job = document.getElementById('p-job').value;
            const interest = document.getElementById('p-interest').value;

            if (!job.trim()) return alert("ì§ì—…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");

            const prompt = `[ë³´í—˜ ì„¸ì¼ì¦ˆ ì „ëµ ë¶„ì„]\nëŒ€ìƒ: ${age} ${gender}\nì§ì—…: ${job}\níŠ¹ì´ì‚¬í•­: ${interest}\n\nì´ ê³ ê°ì„ ê³µëµí•˜ê¸° ìœ„í•œ ë³´ê³ ì„œë¥¼ ì‘ì„±í•´ì¤˜.\n1. ğŸ§  ì¶”ì²œ íŒë§¤ ì»¨ì…‰ (ì‹¬ë¦¬í•™ì  ì ‘ê·¼)\n2. ğŸ—£ï¸ ì•„ì´ìŠ¤ë¸Œë ˆì´í‚¹ ëŒ€í™” ì†Œì¬\n3. âš ï¸ ìƒë‹´ ì‹œ ì£¼ì˜í•  ì \n4. ğŸ’Š ì¶”ì²œ ìƒí’ˆêµ° (ì´ìœ  í¬í•¨)`;
            callGemini(prompt, 'result-persona', 'persona-text', 'btn-persona');
        }

        function generateCompliment() {
            const topic = document.getElementById('input-compliment').value;
            if (!topic.trim()) return alert("ì¹­ì°¬í•  ì†Œì¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");

            const prompt = `ìƒí™©/ì†Œì¬: "${topic}"\n\nì´ ìƒí™©ì—ì„œ ê³ ê°ì—ê²Œ ê±´ë„¬ ìˆ˜ ìˆëŠ” ìì—°ìŠ¤ëŸ½ê³  ê¸°ë¶„ ì¢‹ì€ ì¹­ì°¬ ë©˜íŠ¸ë¥¼ 3ê°€ì§€ ë²„ì „ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜.\n1. ë‹´ë°±í•˜ê³  ì •ì¤‘í•œ ë²„ì „\n2. ìœ ì¾Œí•˜ê³  ì„¼ìŠ¤ìˆëŠ” ë²„ì „\n3. ê°ë™ì ì¸ ë²„ì „`;
            callGemini(prompt, 'result-compliment', 'compliment-text', 'btn-compliment');
        }

        // Init
        // Check standalone mode (optional logic could go here)
    </script>
</body>

</html>



GeminiëŠ” ì¸ë¬¼ ë“±ì— ê´€í•œ ì •ë³´ ì œê³µ ì‹œ ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•˜ì„¸ìš”. ê°œì¸ ì •ë³´ ë³´í˜¸ ë° Geminiìƒˆ ì°½ì—ì„œ ì—´ê¸°